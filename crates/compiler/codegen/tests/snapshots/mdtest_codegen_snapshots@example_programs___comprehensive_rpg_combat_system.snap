---
source: crates/compiler/codegen/tests/mdtest_snapshots.rs
description: "Codegen snapshot for mdtest: Example Programs - Comprehensive RPG Combat System"
input_file: mdtest/07-example-programs/example-00.md
---
Source:
// Struct definitions showing custom types
struct Character {
    health: u32,
    mana: u32,
    level: u32,
    position: Position,
}

struct Position {
    x: u32,
    y: u32,
}

struct CombatResult {
    damage_dealt: u32,
    critical_hit: bool,
    remaining_health: u32,
}


// Entry point demonstrating tuple usage and multiple features
fn main_test() -> u32 {
    let battle_result = simulate_full_battle();

    // Create a summary tuple
    let summary = get_character_stats(Character {
        health: 100,
        mana: 50,
        level: 5,
        position: Position { x: 0, y: 0 },
    });

    // Extract tuple values
    let (health, mana, level) = summary;

    // Combine results using both felt and u32 arithmetic
    let final_score: u32 = battle_result + level;  // u32 + u32 in felt context
    let bonus_score = mana / 10u32;  // felt arithmetic

    return final_score + bonus_score;
}


// Function demonstrating tuples as return types
fn get_character_stats(char: Character) -> (u32, u32, u32) {
    return (char.health, char.mana, char.level);
}

// Function with complex struct manipulation and arithmetic
fn calculate_distance_squared(pos1: Position, pos2: Position) -> u32 {
    let dx: u32 = 0;
    if (pos1.x >= pos2.x) {
        dx = pos1.x - pos2.x;
    } else {
        dx = pos2.x - pos1.x;
    }
    let dy: u32 = 0;
    if (pos1.y >= pos2.y) {
        dy = pos1.y - pos2.y;
    } else {
        dy = pos2.y - pos1.y;
    }
    return dx * dx + dy * dy;
}

// Function demonstrating control flow and u32/felt operations
fn calculate_damage(attacker_level: u32, defender_level: u32, distance: u32) -> u32 {
    let base_damage: u32 = 10;
    let level_bonus = attacker_level * 2;

    // Convert felt to rough u32 for distance penalty (simplified)
    let distance_penalty: u32 = 0;
    if (distance > 100) {
        distance_penalty = 5;
    } else {
        if (distance > 50) {
            distance_penalty = 2;
        }
    }

    let total_damage = base_damage + level_bonus;
    if (total_damage > distance_penalty) {
        return total_damage - distance_penalty;
    } else {
        return 1;  // Minimum damage
    }
}

// Function showing loops and complex logic
fn perform_combat(attacker: Character, defender: Character) -> CombatResult {
    let distance = calculate_distance_squared(attacker.position, defender.position);
    let base_damage = calculate_damage(attacker.level, defender.level, distance);

    // Critical hit calculation using felt arithmetic
    let critical_multiplier = attacker.mana / 10u32;  // u32 division
    let is_critical: bool = false;
    let final_damage = base_damage;

    if (critical_multiplier > 5) {
        is_critical = true;
        final_damage = base_damage * 2;
    }

    // Apply damage with bounds checking
    let new_health = defender.health;
    if (final_damage >= defender.health) {
        new_health = 0;
    } else {
        new_health = defender.health - final_damage;
    }

    let res = CombatResult {
        damage_dealt: final_damage,
        critical_hit: is_critical,
        remaining_health: new_health,
    };
    return res;
}

// Function demonstrating multiple function calls and tuple destructuring
fn simulate_battle_round(hero: Character, enemy: Character) -> u32 {
    // Hero attacks enemy
    let hero_attack = perform_combat(hero, enemy);
    let enemy_health = hero_attack.remaining_health;

    // Enemy counter-attacks if still alive
    if (enemy_health > 0) {
        let enemy_counter = perform_combat(enemy, hero);
        let hero_health = enemy_counter.remaining_health;

        // Return 1 if hero wins, 2 if enemy wins, 0 if both alive
        if (enemy_health == 0) {
            return 1;  // Hero wins
        } else {
            if (hero_health == 0) {
                return 2;  // Enemy wins
            } else {
                return 0;  // Both alive, continue battle
            }
        }
    } else {
        return 1;  // Hero wins immediately
    }
}

// Main function demonstrating variable mutation and comprehensive example
fn simulate_full_battle() -> u32 {
    // Create characters using struct literals
    let hero = Character {
        health: 100,
        mana: 50,
        level: 5,
        position: Position { x: 10, y: 20 },
    };

    let enemy = Character {
        health: 80,
        mana: 30,
        level: 4,
        position: Position { x: 15, y: 25 },
    };

    // Battle loop with mutation
    let current_hero = hero;
    let current_enemy = enemy;
    let round: u32 = 1;
    let max_rounds: u32 = 10;

    // Simulate multiple battle rounds
    loop {
        if (round > max_rounds) {
            break;  // Draw after max rounds
        }

        let result = simulate_battle_round(current_hero, current_enemy);

        if (result == 1) {
            return 1;  // Hero victory
        } else {
            if (result == 2) {
                return 2;  // Enemy victory
            }
        }

        // Update for next round (simplified - reduce both healths)
        if (current_hero.health > 10) {
            current_hero.health = current_hero.health - 5;
        }
        if (current_enemy.health > 8) {
            current_enemy.health = current_enemy.health - 4;
        }

        round = round + 1;
    }

    return 0;  // Draw
}
============================================================
Generated CASM:
main_test:
main_test:
main_test_0:
   0: 10 42 241 _          // call simulate_full_battle
   1: 23 0 0 2             // [fp + 2], [fp + 3] = u32(0)
   2: 23 0 0 4             // [fp + 4], [fp + 5] = u32(0)
   3: 23 100 0 6           // [fp + 6], [fp + 7] = u32(100)
   4: 23 50 0 8            // [fp + 8], [fp + 9] = u32(50)
   5: 23 5 0 10            // [fp + 10], [fp + 11] = u32(5)
   6: 4 2 0 12             // [fp + 12] = [fp + 2] + 0
   7: 4 3 0 13             // [fp + 13] = [fp + 3] + 0
   8: 4 4 0 14             // [fp + 14] = [fp + 4] + 0
   9: 4 5 0 15             // [fp + 15] = [fp + 5] + 0
  10: 4 6 0 44             // Arg 0 slot 0: [fp + 44] = [fp + 6] + 0
  11: 4 7 0 45             // Arg 0 slot 1: [fp + 45] = [fp + 7] + 0
  12: 4 8 0 46             // Arg 0 slot 2: [fp + 46] = [fp + 8] + 0
  13: 4 9 0 47             // Arg 0 slot 3: [fp + 47] = [fp + 9] + 0
  14: 4 10 0 48            // Arg 0 slot 4: [fp + 48] = [fp + 10] + 0
  15: 4 11 0 49            // Arg 0 slot 5: [fp + 49] = [fp + 11] + 0
  16: 4 12 0 50            // Arg 0 slot 6: [fp + 50] = [fp + 12] + 0
  17: 4 13 0 51            // Arg 0 slot 7: [fp + 51] = [fp + 13] + 0
  18: 4 14 0 52            // Arg 0 slot 8: [fp + 52] = [fp + 14] + 0
  19: 4 15 0 53            // Arg 0 slot 9: [fp + 53] = [fp + 15] + 0
  20: 10 60 34 _           // call get_character_stats
  21: 4 54 0 22            // [fp + 22] = [fp + 54] + 0
  22: 4 55 0 23            // [fp + 23] = [fp + 55] + 0
  23: 4 56 0 24            // [fp + 24] = [fp + 56] + 0
  24: 4 57 0 25            // [fp + 25] = [fp + 57] + 0
  25: 4 58 0 26            // [fp + 26] = [fp + 58] + 0
  26: 4 59 0 27            // [fp + 27] = [fp + 59] + 0
  27: 15 40 26 34          // u32([fp + 34], [fp + 35]) = u32([fp + 40], [fp + 41]) U32Add u32([fp + 26], [fp + 27])
  28: 22 24 10 0 36 66     // u32([fp + 36], [fp + 37]); u32([fp + 66], [fp + 67]) = u32([fp + 24], [fp + 25]) / u32(10, 0)
  29: 15 34 36 38          // u32([fp + 38], [fp + 39]) = u32([fp + 34], [fp + 35]) U32Add u32([fp + 36], [fp + 37])
  30: 4 38 0 2147483643    // Return value 0 slot 0: [fp -4] = [fp + 38] + 0
  31: 4 39 0 2147483644    // Return value 0 slot 1: [fp -3] = [fp + 39] + 0
  32: 11 _ _ _             // return
get_character_stats:
get_character_stats_0:
  33: 4 2147483629 0 6     // [fp + 6] = [fp + -18] + 0
get_character_stats:
  34: 4 2147483630 0 7     // [fp + 7] = [fp + -17] + 0
  35: 4 2147483631 0 8     // [fp + 8] = [fp + -16] + 0
  36: 4 2147483632 0 9     // [fp + 9] = [fp + -15] + 0
  37: 4 2147483633 0 10    // [fp + 10] = [fp + -14] + 0
  38: 4 2147483634 0 11    // [fp + 11] = [fp + -13] + 0
  39: 4 6 0 2147483639     // Return value 0 slot 0: [fp -8] = [fp + 6] + 0
  40: 4 7 0 2147483640     // Return value 0 slot 1: [fp -7] = [fp + 7] + 0
  41: 4 8 0 2147483641     // Return value 1 slot 0: [fp -6] = [fp + 8] + 0
  42: 4 9 0 2147483642     // Return value 1 slot 1: [fp -5] = [fp + 9] + 0
  43: 4 10 0 2147483643    // Return value 2 slot 0: [fp -4] = [fp + 10] + 0
  44: 4 11 0 2147483644    // Return value 2 slot 1: [fp -3] = [fp + 11] + 0
  45: 11 _ _ _             // return
calculate_distance_squared:
calculate_distance_squared_0:
  46: 23 0 0 0             // u32([fp + 0], [fp + 1]) = u32(0)
calculate_distance_squared:
  47: 28 2147483635 2147483639 6 // [fp + 6] = u32([fp + -12], [fp + -11]) U32Less u32([fp + -8], [fp + -7])
  48: 14 6 3 _             // if [fp + 6] != 0 jmp rel not_zero_0
  49: 9 1 7 _              // [fp + 7] = 1
  50: 12 53 _ _            // jump abs not_end_1
not_zero_0:
  51: 9 0 7 _              // [fp + 7] = 0
not_end_1:
  52: 14 7 2 _             // if [fp + 7] != 0 jmp rel calculate_distance_squared_1
  53: 12 59 _ _            // jump abs calculate_distance_squared_2
calculate_distance_squared_1:
  54: 16 2147483635 2147483639 12 // u32([fp + 12], [fp + 13]) = u32([fp + -12], [fp + -11]) U32Sub u32([fp + -8], [fp + -7])
  55: 19 12 0 0 14         // u32([fp + 14], [fp + 15]) = u32([fp + 12], [fp + 13]) + u32(0, 0)
  56: 12 62 _ _            // jump abs calculate_distance_squared_3
calculate_distance_squared_2:
  57: 16 2147483639 2147483635 20 // u32([fp + 20], [fp + 21]) = u32([fp + -8], [fp + -7]) U32Sub u32([fp + -12], [fp + -11])
  58: 19 20 0 0 14         // u32([fp + 14], [fp + 15]) = u32([fp + 20], [fp + 21]) + u32(0, 0)
calculate_distance_squared_3:
  59: 23 0 0 22            // u32([fp + 22], [fp + 23]) = u32(0)
  60: 28 2147483637 2147483641 28 // [fp + 28] = u32([fp + -10], [fp + -9]) U32Less u32([fp + -6], [fp + -5])
  61: 14 28 3 _            // if [fp + 28] != 0 jmp rel not_zero_2
  62: 9 1 29 _             // [fp + 29] = 1
  63: 12 68 _ _            // jump abs not_end_3
not_zero_2:
  64: 9 0 29 _             // [fp + 29] = 0
not_end_3:
  65: 14 29 2 _            // if [fp + 29] != 0 jmp rel calculate_distance_squared_4
  66: 12 74 _ _            // jump abs calculate_distance_squared_5
calculate_distance_squared_4:
  67: 16 2147483637 2147483641 34 // u32([fp + 34], [fp + 35]) = u32([fp + -10], [fp + -9]) U32Sub u32([fp + -6], [fp + -5])
  68: 19 34 0 0 36         // u32([fp + 36], [fp + 37]) = u32([fp + 34], [fp + 35]) + u32(0, 0)
  69: 12 77 _ _            // jump abs calculate_distance_squared_6
calculate_distance_squared_5:
  70: 16 2147483641 2147483637 42 // u32([fp + 42], [fp + 43]) = u32([fp + -6], [fp + -5]) U32Sub u32([fp + -10], [fp + -9])
  71: 19 42 0 0 36         // u32([fp + 36], [fp + 37]) = u32([fp + 42], [fp + 43]) + u32(0, 0)
calculate_distance_squared_6:
  72: 19 14 0 0 50         // u32([fp + 50], [fp + 51]) = u32([fp + 14], [fp + 15]) + u32(0, 0)
  73: 17 50 14 44          // u32([fp + 44], [fp + 45]) = u32([fp + 50], [fp + 51]) U32Mul u32([fp + 14], [fp + 15])
  74: 19 36 0 0 52         // u32([fp + 52], [fp + 53]) = u32([fp + 36], [fp + 37]) + u32(0, 0)
  75: 17 52 36 46          // u32([fp + 46], [fp + 47]) = u32([fp + 52], [fp + 53]) U32Mul u32([fp + 36], [fp + 37])
  76: 15 44 46 48          // u32([fp + 48], [fp + 49]) = u32([fp + 44], [fp + 45]) U32Add u32([fp + 46], [fp + 47])
  77: 4 48 0 2147483643    // Return value 0 slot 0: [fp -4] = [fp + 48] + 0
  78: 4 49 0 2147483644    // Return value 0 slot 1: [fp -3] = [fp + 49] + 0
  79: 11 _ _ _             // return
calculate_damage:
calculate_damage_0:
  80: 23 10 0 0            // u32([fp + 0], [fp + 1]) = u32(10)
  81: 21 2147483637 2 0 2  // u32([fp + 2], [fp + 3]) = u32([fp + -10], [fp + -9]) U32Mul u32(2, 0) /* imm = 0x00000002 */
  82: 23 0 0 4             // u32([fp + 4], [fp + 5]) = u32(0)
  83: 23 100 0 21          // [fp + 21], [fp + 22] = u32(100)
  84: 28 21 2147483641 6   // [fp + 6] = u32([fp + 21], [fp + 22]) U32Less u32([fp + -6], [fp + -5])
  85: 14 6 2 _             // if [fp + 6] != 0 jmp rel calculate_damage_1
  86: 12 99 _ _            // jump abs calculate_damage_2
calculate_damage:
calculate_damage_1:
  87: 23 5 0 7             // u32([fp + 7], [fp + 8]) = u32(5)
  88: 19 7 0 0 9           // u32([fp + 9], [fp + 10]) = u32([fp + 7], [fp + 8]) + u32(0, 0)
  89: 12 110 _ _           // jump abs calculate_damage_5
calculate_damage_2:
  90: 23 50 0 23           // [fp + 23], [fp + 24] = u32(50)
  91: 28 23 2147483641 11  // [fp + 11] = u32([fp + 23], [fp + 24]) U32Less u32([fp + -6], [fp + -5])
  92: 19 4 0 0 12          // u32([fp + 12], [fp + 13]) = u32([fp + 4], [fp + 5]) + u32(0, 0)
  93: 14 11 2 _            // if [fp + 11] != 0 jmp rel calculate_damage_3
  94: 12 120 _ _           // jump abs calculate_damage_8
calculate_damage_3:
  95: 23 2 0 14            // u32([fp + 14], [fp + 15]) = u32(2)
  96: 19 14 0 0 12         // u32([fp + 12], [fp + 13]) = u32([fp + 14], [fp + 15]) + u32(0, 0)
calculate_damage_4:
  97: 19 12 0 0 9          // u32([fp + 9], [fp + 10]) = u32([fp + 12], [fp + 13]) + u32(0, 0)
calculate_damage_5:
  98: 15 0 2 16            // u32([fp + 16], [fp + 17]) = u32([fp + 0], [fp + 1]) U32Add u32([fp + 2], [fp + 3])
  99: 28 9 16 18           // [fp + 18] = u32([fp + 9], [fp + 10]) U32Less u32([fp + 16], [fp + 17])
 100: 14 18 2 _            // if [fp + 18] != 0 jmp rel calculate_damage_6
 101: 12 118 _ _           // jump abs calculate_damage_7
calculate_damage_6:
 102: 16 16 9 19           // u32([fp + 19], [fp + 20]) = u32([fp + 16], [fp + 17]) U32Sub u32([fp + 9], [fp + 10])
 103: 4 19 0 2147483643    // Return value 0 slot 0: [fp -4] = [fp + 19] + 0
 104: 4 20 0 2147483644    // Return value 0 slot 1: [fp -3] = [fp + 20] + 0
 105: 11 _ _ _             // return
calculate_damage_7:
 106: 23 1 0 2147483643    // Return value 0: [fp -4, fp -4 + 1] = u32(1)
 107: 11 _ _ _             // return
calculate_damage_8:
 108: 12 108 _ _           // jump abs calculate_damage_4
perform_combat:
perform_combat_0:
 109: 4 2147483626 0 47    // Arg 0 slot 0: [fp + 47] = [fp + -21] + 0
 110: 4 2147483627 0 48    // Arg 0 slot 1: [fp + 48] = [fp + -20] + 0
 111: 4 2147483628 0 49    // Arg 0 slot 2: [fp + 49] = [fp + -19] + 0
 112: 4 2147483629 0 50    // Arg 0 slot 3: [fp + 50] = [fp + -18] + 0
 113: 4 2147483636 0 51    // Arg 1 slot 0: [fp + 51] = [fp + -11] + 0
 114: 4 2147483637 0 52    // Arg 1 slot 1: [fp + 52] = [fp + -10] + 0
 115: 4 2147483638 0 53    // Arg 1 slot 2: [fp + 53] = [fp + -9] + 0
 116: 4 2147483639 0 54    // Arg 1 slot 3: [fp + 54] = [fp + -8] + 0
 117: 10 57 47 _           // call calculate_distance_squared
 118: 4 2147483624 0 59    // Arg 0 slot 0: [fp + 59] = [fp + -23] + 0
 119: 4 2147483625 0 60    // Arg 0 slot 1: [fp + 60] = [fp + -22] + 0
 120: 4 2147483634 0 61    // Arg 1 slot 0: [fp + 61] = [fp + -13] + 0
perform_combat:
 121: 4 2147483635 0 62    // Arg 1 slot 1: [fp + 62] = [fp + -12] + 0
 122: 4 55 0 63            // Arg 2 slot 0: [fp + 63] = [fp + 55] + 0
 123: 4 56 0 64            // Arg 2 slot 1: [fp + 64] = [fp + 56] + 0
 124: 10 67 87 _           // call calculate_damage
 125: 22 2147483622 10 0 18 69 // u32([fp + 18], [fp + 19]); u32([fp + 69], [fp + 70]) = u32([fp + -25], [fp + -24]) / u32(10, 0)
 126: 9 0 20 _             // [fp + 20] = false
 127: 23 5 0 71            // [fp + 71], [fp + 72] = u32(5)
 128: 28 71 18 21          // [fp + 21] = u32([fp + 71], [fp + 72]) U32Less u32([fp + 18], [fp + 19])
 129: 19 65 0 0 22         // u32([fp + 22], [fp + 23]) = u32([fp + 65], [fp + 66]) + u32(0, 0)
 130: 4 20 0 24            // [fp + 24] = [fp + 20] + 0
 131: 14 21 2 _            // if [fp + 21] != 0 jmp rel perform_combat_1
 132: 12 178 _ _           // jump abs perform_combat_6
perform_combat_1:
 133: 9 1 25 _             // [fp + 25] = true
 134: 21 65 2 0 26         // u32([fp + 26], [fp + 27]) = u32([fp + 65], [fp + 66]) U32Mul u32(2, 0) /* imm = 0x00000002 */
 135: 19 26 0 0 22         // u32([fp + 22], [fp + 23]) = u32([fp + 26], [fp + 27]) + u32(0, 0)
 136: 4 25 0 24            // [fp + 24] = [fp + 25] + 0
perform_combat_2:
 137: 28 22 2147483630 32  // [fp + 32] = u32([fp + 22], [fp + 23]) U32Less u32([fp + -17], [fp + -16])
 138: 14 32 3 _            // if [fp + 32] != 0 jmp rel not_zero_8
 139: 9 1 33 _             // [fp + 33] = 1
 140: 12 158 _ _           // jump abs not_end_9
not_zero_8:
 141: 9 0 33 _             // [fp + 33] = 0
not_end_9:
 142: 14 33 2 _            // if [fp + 33] != 0 jmp rel perform_combat_3
 143: 12 164 _ _           // jump abs perform_combat_4
perform_combat_3:
 144: 23 0 0 34            // u32([fp + 34], [fp + 35]) = u32(0)
 145: 19 34 0 0 36         // u32([fp + 36], [fp + 37]) = u32([fp + 34], [fp + 35]) + u32(0, 0)
 146: 12 167 _ _           // jump abs perform_combat_5
perform_combat_4:
 147: 16 2147483630 22 40  // u32([fp + 40], [fp + 41]) = u32([fp + -17], [fp + -16]) U32Sub u32([fp + 22], [fp + 23])
 148: 19 40 0 0 36         // u32([fp + 36], [fp + 37]) = u32([fp + 40], [fp + 41]) + u32(0, 0)
perform_combat_5:
 149: 4 22 0 42            // [fp + 42] = [fp + 22] + 0
 150: 4 23 0 43            // [fp + 43] = [fp + 23] + 0
 151: 4 24 0 44            // [fp + 44] = [fp + 24] + 0
 152: 4 36 0 45            // [fp + 45] = [fp + 36] + 0
 153: 4 37 0 46            // [fp + 46] = [fp + 37] + 0
 154: 4 42 0 2147483640    // Return value 0 slot 0: [fp -7] = [fp + 42] + 0
 155: 4 43 0 2147483641    // Return value 0 slot 1: [fp -6] = [fp + 43] + 0
 156: 4 44 0 2147483642    // Return value 0 slot 2: [fp -5] = [fp + 44] + 0
 157: 4 45 0 2147483643    // Return value 0 slot 3: [fp -4] = [fp + 45] + 0
 158: 4 46 0 2147483644    // Return value 0 slot 4: [fp -3] = [fp + 46] + 0
 159: 11 _ _ _             // return
perform_combat_6:
 160: 12 153 _ _           // jump abs perform_combat_2
simulate_battle_round:
simulate_battle_round_0:
 161: 4 2147483623 0 17    // Arg 0 slot 0: [fp + 17] = [fp + -24] + 0
 162: 4 2147483624 0 18    // Arg 0 slot 1: [fp + 18] = [fp + -23] + 0
 163: 4 2147483625 0 19    // Arg 0 slot 2: [fp + 19] = [fp + -22] + 0
 164: 4 2147483626 0 20    // Arg 0 slot 3: [fp + 20] = [fp + -21] + 0
 165: 4 2147483627 0 21    // Arg 0 slot 4: [fp + 21] = [fp + -20] + 0
 166: 4 2147483628 0 22    // Arg 0 slot 5: [fp + 22] = [fp + -19] + 0
 167: 4 2147483629 0 23    // Arg 0 slot 6: [fp + 23] = [fp + -18] + 0
 168: 4 2147483630 0 24    // Arg 0 slot 7: [fp + 24] = [fp + -17] + 0
 169: 4 2147483631 0 25    // Arg 0 slot 8: [fp + 25] = [fp + -16] + 0
 170: 4 2147483632 0 26    // Arg 0 slot 9: [fp + 26] = [fp + -15] + 0
 171: 4 2147483633 0 27    // Arg 1 slot 0: [fp + 27] = [fp + -14] + 0
 172: 4 2147483634 0 28    // Arg 1 slot 1: [fp + 28] = [fp + -13] + 0
 173: 4 2147483635 0 29    // Arg 1 slot 2: [fp + 29] = [fp + -12] + 0
 174: 4 2147483636 0 30    // Arg 1 slot 3: [fp + 30] = [fp + -11] + 0
 175: 4 2147483637 0 31    // Arg 1 slot 4: [fp + 31] = [fp + -10] + 0
 176: 4 2147483638 0 32    // Arg 1 slot 5: [fp + 32] = [fp + -9] + 0
 177: 4 2147483639 0 33    // Arg 1 slot 6: [fp + 33] = [fp + -8] + 0
 178: 4 2147483640 0 34    // Arg 1 slot 7: [fp + 34] = [fp + -7] + 0
simulate_battle_round:
 179: 4 2147483641 0 35    // Arg 1 slot 8: [fp + 35] = [fp + -6] + 0
 180: 4 2147483642 0 36    // Arg 1 slot 9: [fp + 36] = [fp + -5] + 0
 181: 10 42 121 _          // call perform_combat
 182: 23 0 0 47            // [fp + 47], [fp + 48] = u32(0)
 183: 28 47 40 7           // [fp + 7] = u32([fp + 47], [fp + 48]) U32Less u32([fp + 40], [fp + 41])
 184: 14 7 2 _             // if [fp + 7] != 0 jmp rel simulate_battle_round_1
 185: 12 229 _ _           // jump abs simulate_battle_round_2
simulate_battle_round_1:
 186: 4 2147483633 0 49    // Arg 0 slot 0: [fp + 49] = [fp + -14] + 0
 187: 4 2147483634 0 50    // Arg 0 slot 1: [fp + 50] = [fp + -13] + 0
 188: 4 2147483635 0 51    // Arg 0 slot 2: [fp + 51] = [fp + -12] + 0
 189: 4 2147483636 0 52    // Arg 0 slot 3: [fp + 52] = [fp + -11] + 0
 190: 4 2147483637 0 53    // Arg 0 slot 4: [fp + 53] = [fp + -10] + 0
 191: 4 2147483638 0 54    // Arg 0 slot 5: [fp + 54] = [fp + -9] + 0
 192: 4 2147483639 0 55    // Arg 0 slot 6: [fp + 55] = [fp + -8] + 0
 193: 4 2147483640 0 56    // Arg 0 slot 7: [fp + 56] = [fp + -7] + 0
 194: 4 2147483641 0 57    // Arg 0 slot 8: [fp + 57] = [fp + -6] + 0
 195: 4 2147483642 0 58    // Arg 0 slot 9: [fp + 58] = [fp + -5] + 0
 196: 4 2147483623 0 59    // Arg 1 slot 0: [fp + 59] = [fp + -24] + 0
 197: 4 2147483624 0 60    // Arg 1 slot 1: [fp + 60] = [fp + -23] + 0
 198: 4 2147483625 0 61    // Arg 1 slot 2: [fp + 61] = [fp + -22] + 0
 199: 4 2147483626 0 62    // Arg 1 slot 3: [fp + 62] = [fp + -21] + 0
 200: 4 2147483627 0 63    // Arg 1 slot 4: [fp + 63] = [fp + -20] + 0
 201: 4 2147483628 0 64    // Arg 1 slot 5: [fp + 64] = [fp + -19] + 0
 202: 4 2147483629 0 65    // Arg 1 slot 6: [fp + 65] = [fp + -18] + 0
 203: 4 2147483630 0 66    // Arg 1 slot 7: [fp + 66] = [fp + -17] + 0
 204: 4 2147483631 0 67    // Arg 1 slot 8: [fp + 67] = [fp + -16] + 0
 205: 4 2147483632 0 68    // Arg 1 slot 9: [fp + 68] = [fp + -15] + 0
 206: 10 74 121 _          // call perform_combat
 207: 30 40 0 0 15         // [fp + 15] = u32([fp + 40], [fp + 41]) U32Eq u32(0, 0) /* imm = 0x00000000 */
 208: 14 15 4 _            // if [fp + 15] != 0 jmp rel simulate_battle_round_3
 209: 12 233 _ _           // jump abs simulate_battle_round_4
simulate_battle_round_2:
 210: 23 1 0 2147483643    // Return value 0: [fp -4, fp -4 + 1] = u32(1)
 211: 11 _ _ _             // return
simulate_battle_round_3:
 212: 23 1 0 2147483643    // Return value 0: [fp -4, fp -4 + 1] = u32(1)
 213: 11 _ _ _             // return
simulate_battle_round_4:
 214: 30 72 0 0 16         // [fp + 16] = u32([fp + 72], [fp + 73]) U32Eq u32(0, 0) /* imm = 0x00000000 */
 215: 14 16 2 _            // if [fp + 16] != 0 jmp rel simulate_battle_round_5
 216: 12 239 _ _           // jump abs simulate_battle_round_6
simulate_battle_round_5:
 217: 23 2 0 2147483643    // Return value 0: [fp -4, fp -4 + 1] = u32(2)
 218: 11 _ _ _             // return
simulate_battle_round_6:
 219: 23 0 0 2147483643    // Return value 0: [fp -4, fp -4 + 1] = u32(0)
 220: 11 _ _ _             // return
simulate_full_battle:
simulate_full_battle_0:
 221: 23 10 0 0            // [fp + 0], [fp + 1] = u32(10)
 222: 23 20 0 2            // [fp + 2], [fp + 3] = u32(20)
 223: 23 100 0 4           // [fp + 4], [fp + 5] = u32(100)
 224: 23 50 0 6            // [fp + 6], [fp + 7] = u32(50)
 225: 23 5 0 8             // [fp + 8], [fp + 9] = u32(5)
 226: 4 0 0 10             // [fp + 10] = [fp + 0] + 0
 227: 4 1 0 11             // [fp + 11] = [fp + 1] + 0
 228: 4 2 0 12             // [fp + 12] = [fp + 2] + 0
 229: 4 3 0 13             // [fp + 13] = [fp + 3] + 0
 230: 23 15 0 14           // [fp + 14], [fp + 15] = u32(15)
 231: 23 25 0 16           // [fp + 16], [fp + 17] = u32(25)
 232: 23 80 0 18           // [fp + 18], [fp + 19] = u32(80)
 233: 23 30 0 20           // [fp + 20], [fp + 21] = u32(30)
 234: 23 4 0 22            // [fp + 22], [fp + 23] = u32(4)
 235: 4 14 0 24            // [fp + 24] = [fp + 14] + 0
 236: 4 15 0 25            // [fp + 25] = [fp + 15] + 0
 237: 4 16 0 26            // [fp + 26] = [fp + 16] + 0
 238: 4 17 0 27            // [fp + 27] = [fp + 17] + 0
 239: 23 1 0 28            // u32([fp + 28], [fp + 29]) = u32(1)
 240: 23 10 0 30           // u32([fp + 30], [fp + 31]) = u32(10)
simulate_full_battle:
 241: 4 4 0 32             //  slot 0: [fp + 32] = [fp + 4] + 0
 242: 4 5 0 33             //  slot 1: [fp + 33] = [fp + 5] + 0
 243: 4 6 0 34             //  slot 2: [fp + 34] = [fp + 6] + 0
 244: 4 7 0 35             //  slot 3: [fp + 35] = [fp + 7] + 0
 245: 4 8 0 36             //  slot 4: [fp + 36] = [fp + 8] + 0
 246: 4 9 0 37             //  slot 5: [fp + 37] = [fp + 9] + 0
 247: 4 10 0 38            //  slot 6: [fp + 38] = [fp + 10] + 0
 248: 4 11 0 39            //  slot 7: [fp + 39] = [fp + 11] + 0
 249: 4 12 0 40            //  slot 8: [fp + 40] = [fp + 12] + 0
 250: 4 13 0 41            //  slot 9: [fp + 41] = [fp + 13] + 0
 251: 19 28 0 0 42         // u32([fp + 42], [fp + 43]) = u32([fp + 28], [fp + 29]) + u32(0, 0)
 252: 4 18 0 44            //  slot 0: [fp + 44] = [fp + 18] + 0
 253: 4 19 0 45            //  slot 1: [fp + 45] = [fp + 19] + 0
 254: 4 20 0 46            //  slot 2: [fp + 46] = [fp + 20] + 0
 255: 4 21 0 47            //  slot 3: [fp + 47] = [fp + 21] + 0
 256: 4 22 0 48            //  slot 4: [fp + 48] = [fp + 22] + 0
 257: 4 23 0 49            //  slot 5: [fp + 49] = [fp + 23] + 0
 258: 4 24 0 50            //  slot 6: [fp + 50] = [fp + 24] + 0
 259: 4 25 0 51            //  slot 7: [fp + 51] = [fp + 25] + 0
 260: 4 26 0 52            //  slot 8: [fp + 52] = [fp + 26] + 0
 261: 4 27 0 53            //  slot 9: [fp + 53] = [fp + 27] + 0
simulate_full_battle_1:
 262: 28 30 42 54          // [fp + 54] = u32([fp + 30], [fp + 31]) U32Less u32([fp + 42], [fp + 43])
 263: 14 54 4 _            // if [fp + 54] != 0 jmp rel simulate_full_battle_3
 264: 12 289 _ _           // jump abs simulate_full_battle_4
simulate_full_battle_2:
 265: 23 0 0 2147483643    // Return value 0: [fp -4, fp -4 + 1] = u32(0)
 266: 11 _ _ _             // return
simulate_full_battle_3:
 267: 12 286 _ _           // jump abs simulate_full_battle_2
simulate_full_battle_4:
 268: 4 32 0 115           // Arg 0 slot 0: [fp + 115] = [fp + 32] + 0
 269: 4 33 0 116           // Arg 0 slot 1: [fp + 116] = [fp + 33] + 0
 270: 4 34 0 117           // Arg 0 slot 2: [fp + 117] = [fp + 34] + 0
 271: 4 35 0 118           // Arg 0 slot 3: [fp + 118] = [fp + 35] + 0
 272: 4 36 0 119           // Arg 0 slot 4: [fp + 119] = [fp + 36] + 0
 273: 4 37 0 120           // Arg 0 slot 5: [fp + 120] = [fp + 37] + 0
 274: 4 38 0 121           // Arg 0 slot 6: [fp + 121] = [fp + 38] + 0
 275: 4 39 0 122           // Arg 0 slot 7: [fp + 122] = [fp + 39] + 0
 276: 4 40 0 123           // Arg 0 slot 8: [fp + 123] = [fp + 40] + 0
 277: 4 41 0 124           // Arg 0 slot 9: [fp + 124] = [fp + 41] + 0
 278: 4 44 0 125           // Arg 1 slot 0: [fp + 125] = [fp + 44] + 0
 279: 4 45 0 126           // Arg 1 slot 1: [fp + 126] = [fp + 45] + 0
 280: 4 46 0 127           // Arg 1 slot 2: [fp + 127] = [fp + 46] + 0
 281: 4 47 0 128           // Arg 1 slot 3: [fp + 128] = [fp + 47] + 0
 282: 4 48 0 129           // Arg 1 slot 4: [fp + 129] = [fp + 48] + 0
 283: 4 49 0 130           // Arg 1 slot 5: [fp + 130] = [fp + 49] + 0
 284: 4 50 0 131           // Arg 1 slot 6: [fp + 131] = [fp + 50] + 0
 285: 4 51 0 132           // Arg 1 slot 7: [fp + 132] = [fp + 51] + 0
 286: 4 52 0 133           // Arg 1 slot 8: [fp + 133] = [fp + 52] + 0
 287: 4 53 0 134           // Arg 1 slot 9: [fp + 134] = [fp + 53] + 0
 288: 10 137 179 _         // call simulate_battle_round
 289: 30 135 1 0 57        // [fp + 57] = u32([fp + 135], [fp + 136]) U32Eq u32(1, 0) /* imm = 0x00000001 */
 290: 14 57 2 _            // if [fp + 57] != 0 jmp rel simulate_full_battle_5
 291: 12 316 _ _           // jump abs simulate_full_battle_6
simulate_full_battle_5:
 292: 23 1 0 2147483643    // Return value 0: [fp -4, fp -4 + 1] = u32(1)
 293: 11 _ _ _             // return
simulate_full_battle_6:
 294: 30 135 2 0 58        // [fp + 58] = u32([fp + 135], [fp + 136]) U32Eq u32(2, 0) /* imm = 0x00000002 */
 295: 14 58 2 _            // if [fp + 58] != 0 jmp rel simulate_full_battle_7
 296: 12 322 _ _           // jump abs simulate_full_battle_8
simulate_full_battle_7:
 297: 23 2 0 2147483643    // Return value 0: [fp -4, fp -4 + 1] = u32(2)
 298: 11 _ _ _             // return
simulate_full_battle_8:
simulate_full_battle_9:
 299: 23 10 0 139          // [fp + 139], [fp + 140] = u32(10)
 300: 28 139 32 61         // [fp + 61] = u32([fp + 139], [fp + 140]) U32Less u32([fp + 32], [fp + 33])
 301: 4 32 0 62            //  slot 0: [fp + 62] = [fp + 32] + 0
 302: 4 33 0 63            //  slot 1: [fp + 63] = [fp + 33] + 0
 303: 4 34 0 64            //  slot 2: [fp + 64] = [fp + 34] + 0
 304: 4 35 0 65            //  slot 3: [fp + 65] = [fp + 35] + 0
 305: 4 36 0 66            //  slot 4: [fp + 66] = [fp + 36] + 0
 306: 4 37 0 67            //  slot 5: [fp + 67] = [fp + 37] + 0
 307: 4 38 0 68            //  slot 6: [fp + 68] = [fp + 38] + 0
 308: 4 39 0 69            //  slot 7: [fp + 69] = [fp + 39] + 0
 309: 4 40 0 70            //  slot 8: [fp + 70] = [fp + 40] + 0
 310: 4 41 0 71            //  slot 9: [fp + 71] = [fp + 41] + 0
 311: 14 61 2 _            // if [fp + 61] != 0 jmp rel simulate_full_battle_10
 312: 12 403 _ _           // jump abs simulate_full_battle_14
simulate_full_battle_10:
 313: 19 32 65531 65535 74 // u32([fp + 74], [fp + 75]) = u32([fp + 32], [fp + 33]) U32Sub u32(65531, 65535) (two's complement of 5 -> 4294967291)
 314: 4 74 0 32            // [fp + 32] = [fp + 74] + 0
 315: 4 75 0 33            // [fp + 33] = [fp + 75] + 0
 316: 4 32 0 62            //  slot 0: [fp + 62] = [fp + 32] + 0
 317: 4 33 0 63            //  slot 1: [fp + 63] = [fp + 33] + 0
 318: 4 34 0 64            //  slot 2: [fp + 64] = [fp + 34] + 0
 319: 4 35 0 65            //  slot 3: [fp + 65] = [fp + 35] + 0
 320: 4 36 0 66            //  slot 4: [fp + 66] = [fp + 36] + 0
 321: 4 37 0 67            //  slot 5: [fp + 67] = [fp + 37] + 0
 322: 4 38 0 68            //  slot 6: [fp + 68] = [fp + 38] + 0
 323: 4 39 0 69            //  slot 7: [fp + 69] = [fp + 39] + 0
 324: 4 40 0 70            //  slot 8: [fp + 70] = [fp + 40] + 0
 325: 4 41 0 71            //  slot 9: [fp + 71] = [fp + 41] + 0
simulate_full_battle_11:
 326: 23 8 0 141           // [fp + 141], [fp + 142] = u32(8)
 327: 28 141 44 88         // [fp + 88] = u32([fp + 141], [fp + 142]) U32Less u32([fp + 44], [fp + 45])
 328: 4 44 0 89            //  slot 0: [fp + 89] = [fp + 44] + 0
 329: 4 45 0 90            //  slot 1: [fp + 90] = [fp + 45] + 0
 330: 4 46 0 91            //  slot 2: [fp + 91] = [fp + 46] + 0
 331: 4 47 0 92            //  slot 3: [fp + 92] = [fp + 47] + 0
 332: 4 48 0 93            //  slot 4: [fp + 93] = [fp + 48] + 0
 333: 4 49 0 94            //  slot 5: [fp + 94] = [fp + 49] + 0
 334: 4 50 0 95            //  slot 6: [fp + 95] = [fp + 50] + 0
 335: 4 51 0 96            //  slot 7: [fp + 96] = [fp + 51] + 0
 336: 4 52 0 97            //  slot 8: [fp + 97] = [fp + 52] + 0
 337: 4 53 0 98            //  slot 9: [fp + 98] = [fp + 53] + 0
 338: 14 88 2 _            // if [fp + 88] != 0 jmp rel simulate_full_battle_12
 339: 12 404 _ _           // jump abs simulate_full_battle_15
simulate_full_battle_12:
 340: 19 44 65532 65535 101 // u32([fp + 101], [fp + 102]) = u32([fp + 44], [fp + 45]) U32Sub u32(65532, 65535) (two's complement of 4 -> 4294967292)
 341: 4 101 0 44           // [fp + 44] = [fp + 101] + 0
 342: 4 102 0 45           // [fp + 45] = [fp + 102] + 0
 343: 4 44 0 89            //  slot 0: [fp + 89] = [fp + 44] + 0
 344: 4 45 0 90            //  slot 1: [fp + 90] = [fp + 45] + 0
 345: 4 46 0 91            //  slot 2: [fp + 91] = [fp + 46] + 0
 346: 4 47 0 92            //  slot 3: [fp + 92] = [fp + 47] + 0
 347: 4 48 0 93            //  slot 4: [fp + 93] = [fp + 48] + 0
 348: 4 49 0 94            //  slot 5: [fp + 94] = [fp + 49] + 0
 349: 4 50 0 95            //  slot 6: [fp + 95] = [fp + 50] + 0
 350: 4 51 0 96            //  slot 7: [fp + 96] = [fp + 51] + 0
 351: 4 52 0 97            //  slot 8: [fp + 97] = [fp + 52] + 0
 352: 4 53 0 98            //  slot 9: [fp + 98] = [fp + 53] + 0
simulate_full_battle_13:
 353: 19 42 1 0 113        // u32([fp + 113], [fp + 114]) = u32([fp + 42], [fp + 43]) U32Add u32(1, 0) /* imm = 0x00000001 */
 354: 4 62 0 32            //  slot 0: [fp + 32] = [fp + 62] + 0
 355: 4 63 0 33            //  slot 1: [fp + 33] = [fp + 63] + 0
 356: 4 64 0 34            //  slot 2: [fp + 34] = [fp + 64] + 0
 357: 4 65 0 35            //  slot 3: [fp + 35] = [fp + 65] + 0
 358: 4 66 0 36            //  slot 4: [fp + 36] = [fp + 66] + 0
 359: 4 67 0 37            //  slot 5: [fp + 37] = [fp + 67] + 0
 360: 4 68 0 38            //  slot 6: [fp + 38] = [fp + 68] + 0
 361: 4 69 0 39            //  slot 7: [fp + 39] = [fp + 69] + 0
 362: 4 70 0 40            //  slot 8: [fp + 40] = [fp + 70] + 0
 363: 4 71 0 41            //  slot 9: [fp + 41] = [fp + 71] + 0
 364: 19 113 0 0 42        // u32([fp + 42], [fp + 43]) = u32([fp + 113], [fp + 114]) + u32(0, 0)
 365: 4 89 0 44            //  slot 0: [fp + 44] = [fp + 89] + 0
 366: 4 90 0 45            //  slot 1: [fp + 45] = [fp + 90] + 0
 367: 4 91 0 46            //  slot 2: [fp + 46] = [fp + 91] + 0
 368: 4 92 0 47            //  slot 3: [fp + 47] = [fp + 92] + 0
 369: 4 93 0 48            //  slot 4: [fp + 48] = [fp + 93] + 0
 370: 4 94 0 49            //  slot 5: [fp + 49] = [fp + 94] + 0
 371: 4 95 0 50            //  slot 6: [fp + 50] = [fp + 95] + 0
 372: 4 96 0 51            //  slot 7: [fp + 51] = [fp + 96] + 0
 373: 4 97 0 52            //  slot 8: [fp + 52] = [fp + 97] + 0
 374: 4 98 0 53            //  slot 9: [fp + 53] = [fp + 98] + 0
 375: 12 283 _ _           // jump abs simulate_full_battle_1
simulate_full_battle_14:
 376: 12 350 _ _           // jump abs simulate_full_battle_11
simulate_full_battle_15:
 377: 12 378 _ _           // jump abs simulate_full_battle_13
