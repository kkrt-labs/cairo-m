---
source: crates/compiler/codegen/tests/mdtest_snapshots.rs
description: "Codegen snapshot for mdtest: Optimization Patterns in Cairo-M - Single Argument Optimization"
input_file: mdtest/04-advanced/04-optimization.md
---
Test: Optimization Patterns in Cairo-M - Single Argument Optimization
File: /Users/msaug/kkrt-labs/cairo-m/mdtest/04-advanced/04-optimization.md
============================================================
Source:
fn increment(x: felt) -> felt {
    return x + 1;
}

fn test_single_arg_opt() -> felt {
    let n = 10;
    let result = increment(n);  // Argument already at top of stack
    return result;
}
============================================================
Generated CASM:
increment:
   0: 4 -4 1 -3            // [fp + -3] = [fp + -4] op 1
   1: 11 _ _ _             // return
test_single_arg_opt:
test_single_arg_opt:
test_single_arg_opt_0:
   2: 9 10 2 _             // [fp + 2] = 10
   3: 10 4 0 _             // call increment
   4: 4 3 0 -3             // Return value 0: [fp -3] = [fp + 3] + 0
   5: 11 _ _ _             // return
