---
source: crates/compiler/codegen/tests/codegen_auto_discovery.rs
description: Codegen snapshot for expressions/unary_ops.cm
input_file: test_data/expressions/unary_ops.cm
---
Fixture: expressions/unary_ops.cm
============================================================
Source code:
//!ASSERT CONTAINS: Neg
//!ASSERT CONTAINS: Not

// Tests various unary operations.
fn test_neg(a: felt) -> felt {
    let c = -a;
    return c;
}

fn test_not(a: felt) -> felt {
    let c = !a;
    return c;
}

fn test_neg_literal() -> felt {
    let c = -42;
    return c;
}

fn test_not_literal_nonzero() -> felt {
    let c = !5;
    return c;
}

fn test_double_neg(a: felt) -> felt {
    let c = --a;
    return c;
}

fn test_not_not(a: felt) -> felt {
    let c = !!a;
    return c;
}

============================================================
Result: SEMANTIC ERRORS
Semantic errors found:
DiagnosticCollection {
    diagnostics: [
        Diagnostic {
            severity: Error,
            code: TypeMismatch,
            message: "Operator `!` is not supported for type `felt`",
            file_path: "expressions/unary_ops.cm",
            span: 192..193,
            related_spans: [],
        },
        Diagnostic {
            severity: Error,
            code: TypeMismatch,
            message: "Operator `!` is not supported for type `felt`",
            file_path: "expressions/unary_ops.cm",
            span: 331..332,
            related_spans: [],
        },
        Diagnostic {
            severity: Error,
            code: TypeMismatch,
            message: "Operator `!` is not supported for type `<error>`",
            file_path: "expressions/unary_ops.cm",
            span: 471..473,
            related_spans: [],
        },
        Diagnostic {
            severity: Error,
            code: TypeMismatch,
            message: "Operator `!` is not supported for type `felt`",
            file_path: "expressions/unary_ops.cm",
            span: 472..473,
            related_spans: [],
        },
        Diagnostic {
            severity: Error,
            code: TypeMismatch,
            message: "type mismatch in return statement: expected `felt`, got `bool`",
            file_path: "expressions/unary_ops.cm",
            span: 486..487,
            related_spans: [
                (
                    486..487,
                    "Cannot use bool in arithmetic operations. Consider using logical operators (&&, ||) instead.",
                ),
                (
                    451..455,
                    "function `test_not_not` declared here to return `felt`",
                ),
            ],
        },
    ],
}
