---
source: crates/compiler/codegen/tests/codegen_tests.rs
expression: snapshot_content
---
---
source: crates/compiler/codegen/tests/codegen_tests.rs
expression: codegen_output
---
Fixture: equality.cm
============================================================
Source code:
func main() -> felt {
    let a = 1;
    let b = 0;
    let c = a == b;
    let d = a == 0;
    return c + d;
}

============================================================
Generated CASM:
main:
   0: 6 1 _ 0              // Store immediate: [fp + 0] = 1
   1: 6 0 _ 1              // Store immediate: [fp + 1] = 0
   2: 2 0 1 2              // Equality check: [fp + 2] = [fp + 0] - [fp + 1]
   3: 31 2 3 _             // if [fp + 2] != 0 jmp rel eq_false_2
   4: 6 1 _ 2              // [fp + 2] = 1
   5: 20 7 _ _             // jump abs eq_end_2
eq_false_2:
   6: 6 0 _ 2              // [fp + 2] = 0
eq_end_2:
   7: 4 2 _ 3              // Store: [fp + 3] = [fp + 2]
   8: 3 0 0 4              // Equality check: [fp + 4] = [fp + 0] - 0
   9: 31 4 3 _             // if [fp + 4] != 0 jmp rel eq_false_4
  10: 6 1 _ 4              // [fp + 4] = 1
  11: 20 13 _ _            // jump abs eq_end_4
eq_false_4:
  12: 6 0 _ 4              // [fp + 4] = 0
eq_end_4:
  13: 4 4 _ 5              // Store: [fp + 5] = [fp + 4]
  14: 0 3 5 -3             // [fp + -3] = [fp + 3] op [fp + 5]
  15: 15 _ _ _             // return
