---
source: crates/compiler/parser/src/parser.rs
expression: snapshot_entry
---
code: 
                struct Vector {
                    x: felt,
                    y: felt
                }

                namespace MathUtils {
                    func magnitude(v: Vector) -> felt {
                        return (v.x * v.x + v.y * v.y);
                    }

                    func rfib(n: felt) -> felt {
                        if (n == 0) {
                            return 0;
                        }
                        if (n == 1) {
                            return 1;
                        }
                        return rfib(n - 1) + rfib(n - 2);
                    }
                }

                const TOP_LEVEL_CONST = 100;
            
result: [
    Struct(
        Spanned(
            StructDef {
                name: Spanned(
                    "Vector",
                    24..30,
                ),
                fields: [
                    (
                        Spanned(
                            "x",
                            53..54,
                        ),
                        Named(
                            "felt",
                        ),
                    ),
                    (
                        Spanned(
                            "y",
                            82..83,
                        ),
                        Named(
                            "felt",
                        ),
                    ),
                ],
            },
            17..107,
        ),
    ),
    Namespace(
        Spanned(
            Namespace {
                name: Spanned(
                    "MathUtils",
                    135..144,
                ),
                body: [
                    Function(
                        Spanned(
                            FunctionDef {
                                name: Spanned(
                                    "magnitude",
                                    172..181,
                                ),
                                params: [
                                    Parameter {
                                        name: Spanned(
                                            "v",
                                            182..183,
                                        ),
                                        type_expr: Named(
                                            "Vector",
                                        ),
                                    },
                                ],
                                return_type: Some(
                                    Named(
                                        "felt",
                                    ),
                                ),
                                body: [
                                    Spanned(
                                        Return {
                                            value: Some(
                                                Spanned(
                                                    BinaryOp {
                                                        op: Add,
                                                        left: Spanned(
                                                            BinaryOp {
                                                                op: Mul,
                                                                left: Spanned(
                                                                    MemberAccess {
                                                                        object: Spanned(
                                                                            Identifier(
                                                                                Spanned(
                                                                                    "v",
                                                                                    235..236,
                                                                                ),
                                                                            ),
                                                                            235..236,
                                                                        ),
                                                                        field: Spanned(
                                                                            "x",
                                                                            237..238,
                                                                        ),
                                                                    },
                                                                    235..238,
                                                                ),
                                                                right: Spanned(
                                                                    MemberAccess {
                                                                        object: Spanned(
                                                                            Identifier(
                                                                                Spanned(
                                                                                    "v",
                                                                                    241..242,
                                                                                ),
                                                                            ),
                                                                            241..242,
                                                                        ),
                                                                        field: Spanned(
                                                                            "x",
                                                                            243..244,
                                                                        ),
                                                                    },
                                                                    241..244,
                                                                ),
                                                            },
                                                            235..244,
                                                        ),
                                                        right: Spanned(
                                                            BinaryOp {
                                                                op: Mul,
                                                                left: Spanned(
                                                                    MemberAccess {
                                                                        object: Spanned(
                                                                            Identifier(
                                                                                Spanned(
                                                                                    "v",
                                                                                    247..248,
                                                                                ),
                                                                            ),
                                                                            247..248,
                                                                        ),
                                                                        field: Spanned(
                                                                            "y",
                                                                            249..250,
                                                                        ),
                                                                    },
                                                                    247..250,
                                                                ),
                                                                right: Spanned(
                                                                    MemberAccess {
                                                                        object: Spanned(
                                                                            Identifier(
                                                                                Spanned(
                                                                                    "v",
                                                                                    253..254,
                                                                                ),
                                                                            ),
                                                                            253..254,
                                                                        ),
                                                                        field: Spanned(
                                                                            "y",
                                                                            255..256,
                                                                        ),
                                                                    },
                                                                    253..256,
                                                                ),
                                                            },
                                                            247..256,
                                                        ),
                                                    },
                                                    234..257,
                                                ),
                                            ),
                                        },
                                        227..258,
                                    ),
                                ],
                            },
                            167..280,
                        ),
                    ),
                    Function(
                        Spanned(
                            FunctionDef {
                                name: Spanned(
                                    "rfib",
                                    307..311,
                                ),
                                params: [
                                    Parameter {
                                        name: Spanned(
                                            "n",
                                            312..313,
                                        ),
                                        type_expr: Named(
                                            "felt",
                                        ),
                                    },
                                ],
                                return_type: Some(
                                    Named(
                                        "felt",
                                    ),
                                ),
                                body: [
                                    Spanned(
                                        If {
                                            condition: Spanned(
                                                BinaryOp {
                                                    op: Eq,
                                                    left: Spanned(
                                                        Identifier(
                                                            Spanned(
                                                                "n",
                                                                359..360,
                                                            ),
                                                        ),
                                                        359..360,
                                                    ),
                                                    right: Spanned(
                                                        Literal(
                                                            0,
                                                        ),
                                                        364..365,
                                                    ),
                                                },
                                                359..365,
                                            ),
                                            then_block: Spanned(
                                                Block(
                                                    [
                                                        Spanned(
                                                            Return {
                                                                value: Some(
                                                                    Spanned(
                                                                        Literal(
                                                                            0,
                                                                        ),
                                                                        404..405,
                                                                    ),
                                                                ),
                                                            },
                                                            397..406,
                                                        ),
                                                    ],
                                                ),
                                                367..432,
                                            ),
                                            else_block: None,
                                        },
                                        355..432,
                                    ),
                                    Spanned(
                                        If {
                                            condition: Spanned(
                                                BinaryOp {
                                                    op: Eq,
                                                    left: Spanned(
                                                        Identifier(
                                                            Spanned(
                                                                "n",
                                                                461..462,
                                                            ),
                                                        ),
                                                        461..462,
                                                    ),
                                                    right: Spanned(
                                                        Literal(
                                                            1,
                                                        ),
                                                        466..467,
                                                    ),
                                                },
                                                461..467,
                                            ),
                                            then_block: Spanned(
                                                Block(
                                                    [
                                                        Spanned(
                                                            Return {
                                                                value: Some(
                                                                    Spanned(
                                                                        Literal(
                                                                            1,
                                                                        ),
                                                                        506..507,
                                                                    ),
                                                                ),
                                                            },
                                                            499..508,
                                                        ),
                                                    ],
                                                ),
                                                469..534,
                                            ),
                                            else_block: None,
                                        },
                                        457..534,
                                    ),
                                    Spanned(
                                        Return {
                                            value: Some(
                                                Spanned(
                                                    BinaryOp {
                                                        op: Add,
                                                        left: Spanned(
                                                            FunctionCall {
                                                                callee: Spanned(
                                                                    Identifier(
                                                                        Spanned(
                                                                            "rfib",
                                                                            566..570,
                                                                        ),
                                                                    ),
                                                                    566..570,
                                                                ),
                                                                args: [
                                                                    Spanned(
                                                                        BinaryOp {
                                                                            op: Sub,
                                                                            left: Spanned(
                                                                                Identifier(
                                                                                    Spanned(
                                                                                        "n",
                                                                                        571..572,
                                                                                    ),
                                                                                ),
                                                                                571..572,
                                                                            ),
                                                                            right: Spanned(
                                                                                Literal(
                                                                                    1,
                                                                                ),
                                                                                575..576,
                                                                            ),
                                                                        },
                                                                        571..576,
                                                                    ),
                                                                ],
                                                            },
                                                            566..576,
                                                        ),
                                                        right: Spanned(
                                                            FunctionCall {
                                                                callee: Spanned(
                                                                    Identifier(
                                                                        Spanned(
                                                                            "rfib",
                                                                            580..584,
                                                                        ),
                                                                    ),
                                                                    580..584,
                                                                ),
                                                                args: [
                                                                    Spanned(
                                                                        BinaryOp {
                                                                            op: Sub,
                                                                            left: Spanned(
                                                                                Identifier(
                                                                                    Spanned(
                                                                                        "n",
                                                                                        585..586,
                                                                                    ),
                                                                                ),
                                                                                585..586,
                                                                            ),
                                                                            right: Spanned(
                                                                                Literal(
                                                                                    2,
                                                                                ),
                                                                                589..590,
                                                                            ),
                                                                        },
                                                                        585..590,
                                                                    ),
                                                                ],
                                                            },
                                                            580..590,
                                                        ),
                                                    },
                                                    566..590,
                                                ),
                                            ),
                                        },
                                        559..592,
                                    ),
                                ],
                            },
                            302..614,
                        ),
                    ),
                ],
            },
            125..632,
        ),
    ),
    Const(
        Spanned(
            ConstDef {
                name: Spanned(
                    "TOP_LEVEL_CONST",
                    656..671,
                ),
                value: Spanned(
                    Literal(
                        100,
                    ),
                    674..677,
                ),
            },
            650..678,
        ),
    ),
]
